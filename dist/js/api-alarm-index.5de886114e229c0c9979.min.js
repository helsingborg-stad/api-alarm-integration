(()=>{"use strict";const e=()=>{const e=(e,t,l)=>e.replace("{DISTURBANCE_TITLE}",t??"").replace("{DISTURBANCE_TEXT}",l??"");return{getFirelevelTemplate:(t,l)=>e(t,l.place,""),getBigTemplate:(t,l)=>e(t,l.post_title,l.post_content),getSmallTemplate:(t,l)=>e(t,l.post_title,l.post_content)}};document.addEventListener("DOMContentLoaded",function(t){(e=>{const t={htmlSmall:"",htmlBig:"",htmlFirelevel:"",inited:!1,apiUrl:"",places:[],more_info:"",less_info:"",output_small_active:!1,output_big_active:!1,output_firedangerlevel_active:!1,output_small:"",output_big:"",output_firelevel:"",...e};return{render:({http:e,template:l,transform:r})=>e.fetch(t.apiUrl,{place:t.places.join(",")}).then(e=>{const a=r.map(e);t.output_small_active&&a.disturbances.small.forEach(e=>{document.querySelectorAll("#disturbance-"+e.ID).length>0||document.querySelector(t.output_small)?.insertAdjacentHTML("afterbegin",l.getSmallTemplate(t.htmlSmall,e))}),t.output_big_active&&a.disturbances.big.forEach(e=>{document.querySelectorAll("#disturbance-"+e.ID).length>0||document.querySelector(t.output_big)?.insertAdjacentHTML("afterbegin",l.getBigTemplate(t.htmlBig,e))}),t.output_firedangerlevel_active&&a.firedangerlevel.places.filter(e=>"3"===e.level).forEach(e=>{document.querySelector(t.output_firelevel)?.insertAdjacentHTML("afterbegin",l.getFirelevelTemplate(t.htmlFirelevel,e))})}).catch(e=>{console.log(e),console.log("API Alarm Integration plugin: Request failed!")})}})(settings).render({http:{fetch:async(e,t)=>fetch(`${e}?${new URLSearchParams(t)}`,{cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer"}).then(e=>{if(200!==e.status)throw new Error(`Error: ${e.status}`);return e.json()})},template:e(),transform:{map:e=>({disturbances:{small:e?.small||e?.disturbances?.small||[],big:e?.big||e?.disturbances?.big||[]},firedangerlevel:{dateTimeChanged:e?.firedangerlevel?.dateTimeChanged||"",places:e?.firedangerlevel?.places||[]}})}})})})();
//# sourceMappingURL=api-alarm-index.5de886114e229c0c9979.min.js.map